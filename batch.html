<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Batch Game Card Generator</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
  label { display: block; margin-top: 10px; }
  input, select, button, textarea { margin-top: 5px; padding: 6px; }
  input, select { width: 100%; }
  
  #fileList { margin-top: 20px; }
  .file-entry { display: flex; align-items: center; margin: 5px 0; }
  .file-entry img { height: 40px; margin-right: 10px; background: #222; border: 1px solid #444; }
  
  .file-entry button { 
    width: 30px; height: 30px; border-radius: 50%; 
    border: none; background: #444; color: #eee; cursor: pointer; 
    font-weight: bold; margin-left: 10px;
  }
  
  textarea { width: 100%; height: 250px; margin-top: 15px; background: #222; color: #ccc; border-radius: 20%; border: 1px solid #444; padding: 10px; font-family: monospace; }
  
  #baseURL, #defaultDev, #defaultStatus, button.generateBtn { 
    background: #222; border-radius: 20%; border: 1px solid #444; color: #eee; 
  }
  
  button.generateBtn { cursor: pointer; padding: 10px; width: 100%; margin-top: 15px; }
  
  .status-btn {
    width: 16px; height: 16px;  /* 80% size */
    border-radius: 50%;
    border: 2px solid #444;
    margin-left: 10px;
    cursor: pointer;
    flex-shrink: 0;
  }
  .ok { background: #7CFC00; }         /* light green */
  .FIX { background: #FFD700; }        /* light yellow/golden */
  .soon { background: #FF6F61; }       /* light pinkish red */
</style>
</head>
<body>
<h1>ðŸŽ® Batch Game Card Generator</h1>

<label>GitHub Folder URL (where images will live):</label>
<input type="text" id="baseURL" placeholder="https://raw.githubusercontent.com/user/repo/main/library/images/">

<label>Upload Images:</label>
<input type="file" id="imageUpload" multiple accept="image/*">

<div id="fileList"></div>

<label>Default Developer:</label>
<input type="text" id="defaultDev" placeholder="Made by ...">

<label>Default Status:</label>
<select id="defaultStatus">
  <option value="ok">ok</option>
  <option value="FIX">FIX</option>
  <option value="soon">soon</option>
</select>

<button class="generateBtn" onclick="generateAll()">Generate All Divs</button>

<h2>Generated Code:</h2>
<textarea id="output" readonly></textarea>

<script>
let files = [];

document.getElementById('imageUpload').addEventListener('change', (event) => {
  files = Array.from(event.target.files);
  displayFiles();
});

function displayFiles() {
  const fileList = document.getElementById('fileList');
  fileList.innerHTML = '';

  files.forEach((file, index) => {
    const div = document.createElement('div');
    div.classList.add('file-entry');

    const img = document.createElement('img');
    img.src = URL.createObjectURL(file);

    const nameInput = document.createElement('input');
    nameInput.type = 'text';
    nameInput.value = file.name.replace(/\.[^/.]+$/, "");
    nameInput.style.flex = '1';

    const statusBtn = document.createElement('div');
    let status = document.getElementById('defaultStatus').value;
    statusBtn.classList.add('status-btn', status);
    statusBtn.onclick = () => {
      if (status === "ok") status = "FIX";
      else if (status === "FIX") status = "soon";
      else status = "ok";
      statusBtn.className = "status-btn " + status;
    };

    const removeBtn = document.createElement('button');
    removeBtn.textContent = "X";
    removeBtn.onclick = () => {
      files.splice(index, 1);
      displayFiles();
    };

    div.appendChild(statusBtn);
    div.appendChild(img);
    div.appendChild(nameInput);
    div.appendChild(removeBtn);
    fileList.appendChild(div);
  });
}

function generateAll() {
  const baseURL = document.getElementById('baseURL').value;
  const defaultDev = document.getElementById('defaultDev').value;

  let output = '';
  document.querySelectorAll('.file-entry').forEach(div => {
    const img = div.querySelector('img');
    const nameInput = div.querySelector('input');
    const statusBtn = div.querySelector('.status-btn');
    const status = statusBtn.classList[1] || "ok";

    const gameName = nameInput.value || img.src.split('/').pop().replace(/\.[^/.]+$/, "");
    const rawURL = baseURL + img.src.split('/').pop();
    const folderPath = `library/${gameName.toLowerCase().replace(/\s+/g, '')}/index.html`;

    const divBlock = `
<div class="${status}">
  <a href="${folderPath}">
    <img src="${rawURL}" onerror="this.src='replace.png';"/>
    <h3>${gameName}</h3>
    ${defaultDev ? `<p>${defaultDev}</p>` : ''}
  </a>
</div>`;
    output += divBlock + "\n\n";
  });

  document.getElementById('output').value = output;
}
</script>
</body>
</html>
